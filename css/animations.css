/* ============================================
   conf-bmad — Animations
   GPU-composited only (transform + opacity)
   Per-slide varied entrance effects
   ============================================ */

/* --- Base Keyframes --- */

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.85); }
  to { opacity: 1; transform: scale(1); }
}

@keyframes slideFromLeft {
  from { opacity: 0; transform: translateX(-40px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes slideFromRight {
  from { opacity: 0; transform: translateX(40px); }
  to { opacity: 1; transform: translateX(0); }
}

@keyframes expandWidth {
  from { transform: scaleX(0); }
  to { transform: scaleX(1); }
}

@keyframes ringExpand {
  from { opacity: 0; transform: translate(-50%, -50%) scale(0.6); }
  to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@keyframes pulseGlow {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

@keyframes blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0; }
}

/* --- Punchy New Keyframes --- */

@keyframes blurReveal {
  from { opacity: 0; filter: blur(18px); transform: scale(1.08); }
  to { opacity: 1; filter: blur(0); transform: scale(1); }
}

@keyframes swooshUp {
  0% { opacity: 0; transform: translateY(80px) scale(0.92); }
  60% { opacity: 1; transform: translateY(-10px) scale(1.02); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes popBounce {
  0% { opacity: 0; transform: scale(0); }
  50% { opacity: 1; transform: scale(1.15); }
  70% { transform: scale(0.93); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes elasticScale {
  0% { opacity: 0; transform: scale(0.3); }
  40% { opacity: 1; transform: scale(1.12); }
  60% { transform: scale(0.92); }
  80% { transform: scale(1.04); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes flipInX {
  from { opacity: 0; transform: perspective(800px) rotateX(-80deg); }
  60% { opacity: 1; transform: perspective(800px) rotateX(10deg); }
  to { opacity: 1; transform: perspective(800px) rotateX(0); }
}

@keyframes rotateSlideIn {
  from { opacity: 0; transform: translateX(-60px) rotate(-8deg); }
  to { opacity: 1; transform: translateX(0) rotate(0deg); }
}

@keyframes dropIn {
  0% { opacity: 0; transform: translateY(-60px) scale(0.8); }
  60% { opacity: 1; transform: translateY(8px) scale(1.03); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes polaroidDrop {
  0% { opacity: 0; transform: rotate(8deg) translateY(-120px) scale(0.6); }
  50% { opacity: 1; transform: rotate(-5deg) translateY(10px) scale(1.05); }
  75% { transform: rotate(-2deg) translateY(-5px) scale(0.98); }
  100% { opacity: 1; transform: rotate(-3deg) translateY(0) scale(1); }
}

@keyframes stickerPop {
  0% { opacity: 0; transform: scale(0) rotate(0deg); }
  50% { opacity: 1; transform: scale(1.4) rotate(-10deg); }
  75% { transform: scale(0.9) rotate(5deg); }
  100% { opacity: 1; transform: scale(1); }
}

/* --- 1. Title Slide — staggered fade up --- */

.slide-title.present .deco-corners::before,
.slide-title.present .deco-corners::after {
  animation: fadeIn 800ms ease-out both;
}

.slide-title.present h1 {
  animation: blurReveal 800ms ease-out 100ms both;
}

.slide-title.present .accent-line {
  animation: expandWidth 500ms ease-out 400ms both;
  transform-origin: center;
}

.slide-title.present p {
  animation: fadeIn 500ms ease-out 500ms both;
}

.slide-title.present .tag-row {
  animation: swooshUp 600ms ease-out 650ms both;
}

/* --- 2. Shock Slide — impact scale + ring --- */

.slide-shock.present .deco-ring {
  animation: ringExpand 800ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

.slide-shock.present h2 {
  animation: elasticScale 900ms ease-out 200ms both;
}

.slide-shock.present .deco-poop {
  animation: fadeUp 800ms ease-out 500ms both;
}

/* --- 3. Whoami Slide — left content + right deco --- */

.slide-whoami.present .split-main h2 {
  animation: swooshUp 600ms ease-out both;
}

.slide-whoami.present .accent-line {
  animation: expandWidth 400ms ease-out 200ms both;
  transform-origin: left;
}

.slide-whoami.present .keyword {
  animation: rotateSlideIn 500ms cubic-bezier(0.16, 1, 0.3, 1) both;
}
.slide-whoami.present .keyword:nth-child(1) { animation-delay: 300ms; }
.slide-whoami.present .keyword:nth-child(2) { animation-delay: 480ms; }
.slide-whoami.present .keyword:nth-child(3) { animation-delay: 660ms; }

.slide-whoami.present .whoami-tagline.visible {
  animation: swooshUp 600ms ease-out both;
}

.slide-whoami.present .polaroid {
  animation: polaroidDrop 800ms cubic-bezier(0.34, 1.56, 0.64, 1) 300ms both;
}

.slide-whoami.present .whoami-photo-glow {
  animation: qrGlowPulse 3s ease-in-out 1s infinite;
}

.slide-whoami.present .sticker-1 {
  animation: stickerPop 500ms cubic-bezier(0.34, 1.56, 0.64, 1) 900ms both;
}
.slide-whoami.present .sticker-2 {
  animation: stickerPop 500ms cubic-bezier(0.34, 1.56, 0.64, 1) 1100ms both;
}
.slide-whoami.present .sticker-3 {
  animation: stickerPop 500ms cubic-bezier(0.34, 1.56, 0.64, 1) 1300ms both;
}

/* --- 4. Reality Slide — before/arrow/after sequence --- */

.slide-reality.present .reality-before {
  animation: fadeUp 500ms ease-out 100ms both;
}

.slide-reality.present .reality-arrow {
  animation: elasticScale 600ms ease-out 500ms both;
}

.slide-reality.present .reality-after {
  animation: blurReveal 700ms ease-out 700ms both;
}

/* --- 5. Plagues Slide — staggered card pop --- */

.slide-plagues.present h2 {
  animation: swooshUp 600ms ease-out both;
}

.slide-plagues.present .plague-card {
  animation: popBounce 600ms ease-out both;
}

.slide-plagues.present .plague-card:nth-child(1) { animation-delay: 200ms; }
.slide-plagues.present .plague-card:nth-child(2) { animation-delay: 380ms; }
.slide-plagues.present .plague-card:nth-child(3) { animation-delay: 560ms; }
.slide-plagues.present .plague-card:nth-child(4) { animation-delay: 740ms; }

/* --- 6. Scale Slide — sides slide in from edges --- */

.slide-scale.present .versus-side:first-child {
  animation: swooshUp 700ms ease-out 100ms both;
}

.slide-scale.present .versus-divider {
  animation: blurReveal 500ms ease-out 500ms both;
}

.slide-scale.present .versus-side:last-child {
  animation: swooshUp 700ms ease-out 300ms both;
}

/* --- 7. Question Slide — lines extend, text reveals --- */

.slide-question.present .deco-line-h:first-of-type {
  animation: expandWidth 600ms ease-out 100ms both;
  transform-origin: center;
}

.slide-question.present h2 {
  animation: blurReveal 900ms ease-out 400ms both;
}

.slide-question.present .gradient-text {
  background-size: 200% 200%;
  animation: gradientShift 4s ease-in-out infinite;
  animation-delay: 800ms;
}

.slide-question.present .deco-line-h:last-of-type {
  animation: expandWidth 600ms ease-out 700ms both;
  transform-origin: center;
}

/* --- 8. BMAD Slide — title + pillars stagger --- */

.slide-bmad.present h2 {
  animation: elasticScale 800ms ease-out both;
}

.slide-bmad.present p:first-of-type {
  animation: fadeIn 400ms ease-out 300ms both;
}

.slide-bmad.present .pillar {
  animation: dropIn 600ms ease-out both;
}

.slide-bmad.present .pillar:nth-child(1) { animation-delay: 400ms; }
.slide-bmad.present .pillar:nth-child(2) { animation-delay: 600ms; }
.slide-bmad.present .pillar:nth-child(3) { animation-delay: 800ms; }

.slide-bmad.present .tag-row {
  animation: swooshUp 500ms ease-out 1000ms both;
}

/* --- 9. Agents Slide — cards stagger in --- */

.slide-agents.present h2 {
  animation: swooshUp 600ms ease-out both;
}

.slide-agents.present .agent-card {
  animation: popBounce 500ms ease-out both;
}

.slide-agents.present .agent-card:nth-child(1) { animation-delay: 150ms; }
.slide-agents.present .agent-card:nth-child(2) { animation-delay: 250ms; }
.slide-agents.present .agent-card:nth-child(3) { animation-delay: 350ms; }
.slide-agents.present .agent-card:nth-child(4) { animation-delay: 450ms; }
.slide-agents.present .agent-card:nth-child(5) { animation-delay: 550ms; }
.slide-agents.present .agent-card:nth-child(6) { animation-delay: 650ms; }
.slide-agents.present .agent-card:nth-child(7) { animation-delay: 750ms; }
.slide-agents.present .agent-card:nth-child(8) { animation-delay: 850ms; }
.slide-agents.present .agent-card:nth-child(9) { animation-delay: 950ms; }

/* --- 10. Workflow Slide — phases cascade left to right --- */

.slide-workflow.present h2 {
  animation: blurReveal 600ms ease-out both;
}

.slide-workflow.present .wf-phase {
  animation: flipInX 600ms ease-out both;
}

.slide-workflow.present .wf-phase:nth-of-type(1) { animation-delay: 200ms; }
.slide-workflow.present .wf-phase:nth-of-type(2) { animation-delay: 500ms; }
.slide-workflow.present .wf-phase:nth-of-type(3) { animation-delay: 800ms; }
.slide-workflow.present .wf-phase:nth-of-type(4) { animation-delay: 1100ms; }

.slide-workflow.present .wf-arrow {
  animation: fadeIn 300ms ease-out both;
}

.slide-workflow.present .wf-arrow:nth-of-type(1) { animation-delay: 400ms; }
.slide-workflow.present .wf-arrow:nth-of-type(2) { animation-delay: 700ms; }
.slide-workflow.present .wf-arrow:nth-of-type(3) { animation-delay: 1000ms; }

/* --- Demo Slide — terminal slides up + cursor blink --- */

.slide-demo.present .terminal-frame {
  animation: swooshUp 700ms ease-out both;
}

.slide-demo.present .terminal-body .text-mono::after {
  content: '█';
  animation: blink 1s step-end infinite;
  color: var(--color-cyan);
  margin-left: 4px;
}

.slide-demo.present .glow-cyan {
  animation: pulseGlow 2.5s ease-in-out infinite;
  animation-delay: 600ms;
}

/* --- 13-14. Terminal Slides — fragment-based reveal --- */

.slide-install.present .terminal-frame,
.slide-wf-init.present .terminal-frame {
  animation: swooshUp 600ms ease-out both;
}

.slide-install .terminal-body .fragment,
.slide-wf-init .terminal-body .fragment {
  transition: none;
}

.slide-install .terminal-body .fragment.visible,
.slide-wf-init .terminal-body .fragment.visible {
  animation: fadeIn 300ms ease-out both;
}

.slide-pb.present .terminal-frame {
  animation: swooshUp 600ms ease-out both;
}

.slide-pb .terminal-body .fragment {
  transition: none;
}

.slide-pb .terminal-body .fragment.visible {
  animation: fadeIn 300ms ease-out both;
}

.slide-install.present .t-cursor,
.slide-wf-init.present .t-cursor {
  animation: blink 1s step-end infinite;
}

/* --- 16. Roadmap Slide — staggered nodes + connectors --- */

@keyframes pulseNode {
  0%, 100% { box-shadow: 0 0 25px rgba(167, 139, 250, 0.3); }
  50% { box-shadow: 0 0 40px rgba(167, 139, 250, 0.5), 0 0 60px rgba(167, 139, 250, 0.2); }
}

.slide-roadmap.present h2 {
  animation: swooshUp 600ms ease-out both;
}

.slide-roadmap.present h2 + p {
  animation: fadeIn 400ms ease-out 200ms both;
}

.slide-roadmap.present .roadmap-step {
  animation: popBounce 500ms ease-out both;
}

.slide-roadmap.present .roadmap-step:nth-of-type(1) { animation-delay: 300ms; }
.slide-roadmap.present .roadmap-step:nth-of-type(2) { animation-delay: 500ms; }
.slide-roadmap.present .roadmap-step:nth-of-type(3) { animation-delay: 700ms; }
.slide-roadmap.present .roadmap-step:nth-of-type(4) { animation-delay: 900ms; }
.slide-roadmap.present .roadmap-step:nth-of-type(5) { animation-delay: 1100ms; }
.slide-roadmap.present .roadmap-step:nth-of-type(6) { animation-delay: 1300ms; }

.slide-roadmap.present .roadmap-connector {
  animation: fadeIn 300ms ease-out both;
}

.slide-roadmap.present .roadmap-connector:nth-of-type(1) { animation-delay: 400ms; }
.slide-roadmap.present .roadmap-connector:nth-of-type(2) { animation-delay: 600ms; }
.slide-roadmap.present .roadmap-connector:nth-of-type(3) { animation-delay: 800ms; }
.slide-roadmap.present .roadmap-connector:nth-of-type(4) { animation-delay: 1000ms; }
.slide-roadmap.present .roadmap-connector:nth-of-type(5) { animation-delay: 1200ms; }

.slide-roadmap.present .roadmap-next .roadmap-node {
  animation: pulseNode 2s ease-in-out infinite;
  animation-delay: 1500ms;
}

.slide-roadmap.present .roadmap-here {
  animation: fadeIn 400ms ease-out 1600ms both;
}

/* --- 17. Workflow Status Slide — terminal fragment reveal --- */

.slide-wf-status.present .terminal-frame {
  animation: swooshUp 600ms ease-out both;
}

.slide-wf-status .terminal-body .fragment {
  transition: none;
}

.slide-wf-status .terminal-body .fragment.visible {
  animation: fadeIn 300ms ease-out both;
}

/* --- 18. Artifacts Slide — tree + desc stagger --- */

.slide-artifacts.present h2 {
  animation: blurReveal 600ms ease-out both;
}

.slide-artifacts.present h2 + p {
  animation: fadeIn 400ms ease-out 200ms both;
}

.slide-artifacts.present .artifacts-tree {
  animation: swooshUp 600ms ease-out 300ms both;
}

.slide-artifacts.present .artifact-block {
  animation: rotateSlideIn 450ms cubic-bezier(0.16, 1, 0.3, 1) both;
}

.slide-artifacts.present .artifact-block:nth-child(1) { animation-delay: 500ms; }
.slide-artifacts.present .artifact-block:nth-child(2) { animation-delay: 650ms; }
.slide-artifacts.present .artifact-block:nth-child(3) { animation-delay: 800ms; }
.slide-artifacts.present .artifact-block:nth-child(4) { animation-delay: 950ms; }
.slide-artifacts.present .artifact-block:nth-child(5) { animation-delay: 1100ms; }
.slide-artifacts.present .artifact-block:nth-child(6) { animation-delay: 1250ms; }

/* --- 19. Doc Preview Slide — cards stagger in --- */

.slide-doc-preview.present h2 {
  animation: swooshUp 600ms ease-out both;
}

.slide-doc-preview.present .doc-card {
  animation: flipInX 600ms ease-out both;
}

.slide-doc-preview.present .doc-card:nth-child(1) { animation-delay: 200ms; }
.slide-doc-preview.present .doc-card:nth-child(2) { animation-delay: 350ms; }
.slide-doc-preview.present .doc-card:nth-child(3) { animation-delay: 500ms; }
.slide-doc-preview.present .doc-card:nth-child(4) { animation-delay: 650ms; }
.slide-doc-preview.present .doc-card:nth-child(5) { animation-delay: 800ms; }
.slide-doc-preview.present .doc-card:nth-child(6) { animation-delay: 950ms; }

/* --- 20. Verdict Slide — title + blocks stagger --- */

.slide-verdict.present h2 {
  animation: blurReveal 700ms ease-out both;
}

.slide-verdict.present .verdict-label {
  animation: swooshUp 500ms ease-out 200ms both;
}

/* --- 21. Takeaway Slide — cards stagger in --- */

.slide-takeaway.present h2 {
  animation: elasticScale 700ms ease-out both;
}

.slide-takeaway.present .takeaway-card {
  animation: dropIn 550ms ease-out both;
}

.slide-takeaway.present .takeaway-card:nth-child(1) { animation-delay: 200ms; }
.slide-takeaway.present .takeaway-card:nth-child(2) { animation-delay: 350ms; }
.slide-takeaway.present .takeaway-card:nth-child(3) { animation-delay: 500ms; }
.slide-takeaway.present .takeaway-card:nth-child(4) { animation-delay: 650ms; }
.slide-takeaway.present .takeaway-card:nth-child(5) { animation-delay: 800ms; }
.slide-takeaway.present .takeaway-card:nth-child(6) { animation-delay: 950ms; }

/* --- 22. Write Book Slide — cinematic reveals --- */

@keyframes glowPulse {
  0%, 100% { text-shadow: 0 0 60px rgba(244, 114, 182, 0.25), 0 0 120px rgba(167, 139, 250, 0.15), 0 0 200px rgba(244, 114, 182, 0.08); }
  50% { text-shadow: 0 0 80px rgba(244, 114, 182, 0.4), 0 0 160px rgba(167, 139, 250, 0.25), 0 0 250px rgba(244, 114, 182, 0.12); }
}

@keyframes badgePulse {
  0%, 100% { box-shadow: 0 0 15px rgba(34, 211, 238, 0.1); }
  50% { box-shadow: 0 0 30px rgba(34, 211, 238, 0.3), 0 0 60px rgba(34, 211, 238, 0.1); }
}

@keyframes floatOrb {
  0%, 100% { transform: translate(0, 0); }
  50% { transform: translate(12px, -18px); }
}

@keyframes scaleInBig {
  from { opacity: 0; transform: scale(0.65); }
  to { opacity: 1; transform: scale(1); }
}

/* Orbs float in and breathe */
.slide-write-book.present .wb-orb-1 {
  animation: fadeIn 1500ms ease-out 100ms both, floatOrb 8s ease-in-out 2s infinite;
}

.slide-write-book.present .wb-orb-2 {
  animation: fadeIn 1500ms ease-out 400ms both, floatOrb 10s ease-in-out 3s infinite;
}

.slide-write-book.present .wb-orb-3 {
  animation: fadeIn 2000ms ease-out 600ms both, floatOrb 12s ease-in-out 4s infinite;
}

/* Corner brackets fade in */
.slide-write-book.present .wb-frame::before {
  animation: fadeIn 1200ms ease-out 200ms both;
}

.slide-write-book.present .wb-frame::after {
  animation: fadeIn 1200ms ease-out 500ms both;
}

/* Fragments — custom transitions */
.slide-write-book .fragment {
  transition: none;
}

/* Fragment 0: Intro — slow poetic rise */
.slide-write-book .wb-intro.fragment.visible {
  animation: swooshUp 900ms ease-out both;
}

/* Fragment 1: Vision — dramatic blur reveal */
.slide-write-book .wb-vision.fragment.visible {
  animation: blurReveal 1000ms ease-out both;
}

/* Vision gradient loops */
.slide-write-book.present .wb-vision .gradient-text {
  background-size: 200% 200%;
  animation: gradientShift 5s ease-in-out infinite;
}

/* Fragment 2: Insight — fade + lines expand + badge pulses */
.slide-write-book .wb-insight.fragment.visible {
  animation: fadeUp 700ms ease-out both;
}

.slide-write-book .wb-insight.fragment.visible .wb-rule {
  animation: expandWidth 700ms ease-out 250ms both;
  transform-origin: center;
}

.slide-write-book.present .wb-badge {
  animation: badgePulse 2.5s ease-in-out infinite;
}

/* Fragment 3: FINALE — massive elastic entrance with glow */
.slide-write-book .wb-finale-wrap.fragment.visible {
  animation: elasticScale 1100ms ease-out both;
}

.slide-write-book .wb-finale-wrap.fragment.visible .wb-finale-line {
  animation: expandWidth 600ms ease-out 300ms both;
  transform-origin: center;
}

/* Finale gradient + glow loop */
.slide-write-book.present .wb-finale .gradient-hot {
  background-size: 200% 200%;
  animation: gradientShift 3.5s ease-in-out infinite;
}

.slide-write-book.present .wb-finale {
  animation: glowPulse 3s ease-in-out infinite;
  animation-delay: 1500ms;
}

/* --- 22. Thanks Slide — EXPLOSIVE reveal --- */

/* --- Confetti keyframes --- */
@keyframes confettiFly {
  0%   { transform: translateY(0) rotate(0deg) scale(0); opacity: 1; }
  8%   { transform: translateY(-30px) rotate(80deg) scale(1); opacity: 1; }
  60%  { opacity: 0.9; }
  100% { transform: translateY(-550px) rotate(900deg) scale(0.15); opacity: 0; }
}

@keyframes confettiFlySoft {
  0%   { transform: translateY(0) rotate(0deg) scale(0); opacity: 1; }
  10%  { transform: translateY(-20px) rotate(50deg) scale(1); opacity: 1; }
  55%  { opacity: 0.8; }
  100% { transform: translateY(-380px) rotate(650deg) scale(0.25); opacity: 0; }
}

/* Second wave — slower, longer arc */
@keyframes confettiFlyWave2 {
  0%   { transform: translateY(0) rotate(0deg) scale(0); opacity: 1; }
  12%  { transform: translateY(-25px) rotate(40deg) scale(1.2); opacity: 1; }
  50%  { opacity: 0.9; }
  100% { transform: translateY(-480px) rotate(720deg) scale(0.1); opacity: 0; }
}

@keyframes confettiFlyWave2Soft {
  0%   { transform: translateY(0) rotate(0deg) scale(0); opacity: 1; }
  15%  { transform: translateY(-18px) rotate(30deg) scale(1.1); opacity: 1; }
  45%  { opacity: 0.8; }
  100% { transform: translateY(-350px) rotate(540deg) scale(0.2); opacity: 0; }
}

/* --- Flash keyframes --- */
@keyframes flashBurst {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.2); }
  15%  { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(2.5); }
}

@keyframes flashBurstCyan {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.3); }
  20%  { opacity: 0.9; transform: translate(-50%, -50%) scale(1.2); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(2); }
}

@keyframes flashBurstPink {
  0%   { opacity: 0; transform: translate(-50%, -50%) scale(0.1); }
  10%  { opacity: 0.7; transform: translate(-50%, -50%) scale(0.8); }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(3); }
}

/* --- Neon rings --- */
@keyframes neonRingExpand {
  0%   { opacity: 0.9; transform: translate(-50%, -50%) scale(0); }
  40%  { opacity: 0.6; }
  100% { opacity: 0; transform: translate(-50%, -50%) scale(6); }
}

/* --- Edge glow --- */
@keyframes edgeGlowPulse {
  0%   { opacity: 0; }
  15%  { opacity: 1; }
  40%  { opacity: 0.6; }
  60%  { opacity: 0.8; }
  100% { opacity: 0; }
}

/* --- Screen shake --- */
@keyframes screenShake {
  0%, 100% { transform: translate(0, 0); }
  8%  { transform: translate(-10px, 5px); }
  16% { transform: translate(8px, -8px); }
  24% { transform: translate(-6px, 10px); }
  32% { transform: translate(10px, -4px); }
  40% { transform: translate(-8px, -6px); }
  48% { transform: translate(6px, 8px); }
  56% { transform: translate(-4px, -10px); }
  64% { transform: translate(8px, 4px); }
  72% { transform: translate(-6px, 6px); }
  80% { transform: translate(4px, -4px); }
  88% { transform: translate(-2px, 2px); }
}

/* --- OUI entrance --- */
@keyframes ouiExplode {
  0%   { opacity: 0; transform: scale(0); filter: blur(30px); }
  25%  { opacity: 1; transform: scale(1.6); filter: blur(0); }
  40%  { transform: scale(0.85); }
  55%  { transform: scale(1.2); }
  70%  { transform: scale(0.95); }
  85%  { transform: scale(1.05); }
  100% { opacity: 1; transform: scale(1); }
}

@keyframes ouiGlow {
  0%, 100% { filter: drop-shadow(0 0 40px rgba(34, 211, 238, 0.5)) drop-shadow(0 0 80px rgba(52, 211, 153, 0.3)); }
  50%      { filter: drop-shadow(0 0 60px rgba(34, 211, 238, 0.8)) drop-shadow(0 0 120px rgba(52, 211, 153, 0.5)) drop-shadow(0 0 200px rgba(167, 139, 250, 0.3)); }
}

/* === THANKS SLIDE ANIMATIONS === */

.slide-thanks.present h2 {
  animation: elasticScale 800ms ease-out both;
}

.slide-thanks.present .accent-line {
  animation: expandWidth 500ms ease-out 300ms both;
  transform-origin: center;
}

/* Boom fragment — instant reveal */
.slide-thanks .thanks-boom.fragment {
  transition: none;
}

/* Screen shake on the whole slide content */
.slide-thanks:has(.thanks-boom.visible) .slide-content {
  animation: screenShake 600ms ease-out both;
}

/* Multi-layer flash */
.thanks-boom.fragment.visible .boom-flash {
  animation: flashBurst 1.4s ease-out both;
}

.thanks-boom.fragment.visible .boom-flash-cyan {
  animation: flashBurstCyan 1s ease-out 50ms both;
}

.thanks-boom.fragment.visible .boom-flash-pink {
  animation: flashBurstPink 1.8s ease-out 100ms both;
}

/* Neon rings — staggered expansion */
.thanks-boom.fragment.visible .nr-1 {
  animation: neonRingExpand 1.2s ease-out both;
}

.thanks-boom.fragment.visible .nr-2 {
  animation: neonRingExpand 1.4s ease-out 150ms both;
}

.thanks-boom.fragment.visible .nr-3 {
  animation: neonRingExpand 1.6s ease-out 300ms both;
}

/* Edge glow */
.thanks-boom.fragment.visible .boom-edge-glow {
  animation: edgeGlowPulse 1.5s ease-out both;
}

/* === CONFETTI WAVE 1 — fast, far === */
.thanks-boom.fragment.visible .confetti-burst:not(.confetti-wave-2) span:nth-child(odd) i {
  animation: confettiFly 1.5s cubic-bezier(0.15, 0.6, 0.35, 1) both;
}

.thanks-boom.fragment.visible .confetti-burst:not(.confetti-wave-2) span:nth-child(even) i {
  animation: confettiFlySoft 1.8s cubic-bezier(0.15, 0.6, 0.35, 1) both;
}

/* Wave 1 staggered delays — 24 pieces */
.confetti-burst:not(.confetti-wave-2) span:nth-child(1)  i { animation-delay:   0ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(2)  i { animation-delay:  30ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(3)  i { animation-delay:  60ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(4)  i { animation-delay:  15ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(5)  i { animation-delay:  45ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(6)  i { animation-delay:  80ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(7)  i { animation-delay:  20ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(8)  i { animation-delay:  55ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(9)  i { animation-delay:  35ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(10) i { animation-delay:  70ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(11) i { animation-delay:  10ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(12) i { animation-delay:  90ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(13) i { animation-delay:  40ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(14) i { animation-delay:  65ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(15) i { animation-delay:  25ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(16) i { animation-delay:  50ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(17) i { animation-delay:  75ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(18) i { animation-delay:   5ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(19) i { animation-delay:  85ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(20) i { animation-delay:  42ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(21) i { animation-delay:  18ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(22) i { animation-delay:  58ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(23) i { animation-delay:  32ms !important; }
.confetti-burst:not(.confetti-wave-2) span:nth-child(24) i { animation-delay:  72ms !important; }

/* === CONFETTI WAVE 2 — delayed, different arc === */
.thanks-boom.fragment.visible .confetti-wave-2 span:nth-child(odd) i {
  animation: confettiFlyWave2 1.8s cubic-bezier(0.1, 0.7, 0.3, 1) both;
}

.thanks-boom.fragment.visible .confetti-wave-2 span:nth-child(even) i {
  animation: confettiFlyWave2Soft 2s cubic-bezier(0.1, 0.7, 0.3, 1) both;
}

/* Wave 2 delays — 12 pieces, all delayed 200ms+ */
.confetti-wave-2 span:nth-child(1)  i { animation-delay: 200ms !important; }
.confetti-wave-2 span:nth-child(2)  i { animation-delay: 240ms !important; }
.confetti-wave-2 span:nth-child(3)  i { animation-delay: 280ms !important; }
.confetti-wave-2 span:nth-child(4)  i { animation-delay: 220ms !important; }
.confetti-wave-2 span:nth-child(5)  i { animation-delay: 260ms !important; }
.confetti-wave-2 span:nth-child(6)  i { animation-delay: 300ms !important; }
.confetti-wave-2 span:nth-child(7)  i { animation-delay: 210ms !important; }
.confetti-wave-2 span:nth-child(8)  i { animation-delay: 250ms !important; }
.confetti-wave-2 span:nth-child(9)  i { animation-delay: 230ms !important; }
.confetti-wave-2 span:nth-child(10) i { animation-delay: 270ms !important; }
.confetti-wave-2 span:nth-child(11) i { animation-delay: 290ms !important; }
.confetti-wave-2 span:nth-child(12) i { animation-delay: 310ms !important; }

/* === TEXT REVEALS === */

/* "Je réponds déjà à la première :" */
.thanks-boom.fragment.visible .thanks-spoiler {
  animation: fadeUp 400ms ease-out 200ms both;
}

/* Massive "Oui" — the star of the show */
.thanks-boom.fragment.visible .boom-oui {
  animation: ouiExplode 1s cubic-bezier(0.16, 1, 0.3, 1) 350ms both, ouiGlow 2s ease-in-out 1.5s infinite;
}

/* "cette présentation..." */
.thanks-boom.fragment.visible .thanks-spoiler-2 {
  animation: fadeUp 500ms ease-out 600ms both;
}

/* QR code + footer */
@keyframes qrGlowPulse {
  0%, 100% { box-shadow: 0 0 30px rgba(34, 211, 238, 0.1), 0 0 60px rgba(167, 139, 250, 0.05); }
  50%      { box-shadow: 0 0 40px rgba(34, 211, 238, 0.25), 0 0 80px rgba(167, 139, 250, 0.15), 0 0 120px rgba(34, 211, 238, 0.05); }
}

.slide-thanks.present .thanks-footer {
  animation: swooshUp 600ms ease-out 500ms both;
}

.slide-thanks.present .qr-frame {
  animation: qrGlowPulse 3s ease-in-out 1.5s infinite;
}

.slide-thanks.present .qr-glow {
  animation: floatOrb 6s ease-in-out 1s infinite;
}
